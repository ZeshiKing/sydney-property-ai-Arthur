# å‰åç«¯åä½œæŒ‡å— - æ¾³æ´²ç§Ÿæˆ¿èšåˆç³»ç»Ÿ

## ğŸ¤ ç»™å‰ç«¯å¼€å‘è€…çš„å®Œæ•´æŒ‡å—

è¿™ä»½æ–‡æ¡£è§£ç­”å‰ç«¯å¼€å‘è€…å…³äºåç«¯APIè¿æ¥ã€æ•°æ®æŠ“å–æœºåˆ¶å’Œå®æ—¶æ€§çš„æ‰€æœ‰ç–‘é—®ã€‚

---

## ğŸ“‹ ç›®å½•
- [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
- [APIå·¥ä½œæœºåˆ¶è¯¦è§£](#apiå·¥ä½œæœºåˆ¶è¯¦è§£)
- [å®æ—¶æ€§è¯´æ˜](#å®æ—¶æ€§è¯´æ˜)
- [å‰ç«¯è¿æ¥æ–¹æ³•](#å‰ç«¯è¿æ¥æ–¹æ³•)
- [å®Œæ•´ä»£ç ç¤ºä¾‹](#å®Œæ•´ä»£ç ç¤ºä¾‹)
- [æ•°æ®æµç¨‹å›¾è§£](#æ•°æ®æµç¨‹å›¾è§£)
- [å¸¸è§é—®é¢˜è§£ç­”](#å¸¸è§é—®é¢˜è§£ç­”)
- [è°ƒè¯•å’Œæ’é”™](#è°ƒè¯•å’Œæ’é”™)

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### å½“å‰æŠ€æœ¯æ ˆ
```
å‰ç«¯ (ä½ çš„éƒ¨åˆ†)     â†’     åç«¯ (Python FastAPI)     â†’     å¤–éƒ¨æ•°æ®æº
   â”œâ”€ React/Vue/åŸç”ŸJS        â”œâ”€ FastAPI æ¡†æ¶               â”œâ”€ Domain.com.au
   â”œâ”€ HTTPè¯·æ±‚               â”œâ”€ Firecrawl API              â”œâ”€ Real Estate.com.au
   â””â”€ æ•°æ®å±•ç¤º               â”œâ”€ PostgreSQL                 â””â”€ å…¶ä»–æˆ¿äº§ç½‘ç«™
                           â”œâ”€ Redisç¼“å­˜
                           â””â”€ CSVå¯¼å‡º
```

### åç«¯æœåŠ¡åœ°å€
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:8000`
- **APIæ–‡æ¡£**: `http://localhost:8000/docs` (Swagger UI)
- **å¥åº·æ£€æŸ¥**: `http://localhost:8000/health`

---

## âš¡ APIå·¥ä½œæœºåˆ¶è¯¦è§£

### ğŸ”„ æ•°æ®æŠ“å–æµç¨‹ (é‡è¦ï¼)

**æˆ‘ä»¬çš„ç³»ç»Ÿä¸æ˜¯ä¼ ç»Ÿçš„çˆ¬è™«ï¼Œè€Œæ˜¯é€šè¿‡Firecrawl APIè¿›è¡Œæ•°æ®æŠ“å–ï¼š**

```mermaid
sequenceDiagram
    participant å‰ç«¯ as å‰ç«¯åº”ç”¨
    participant åç«¯ as Python FastAPI
    participant Firecrawl as Firecrawl API
    participant Domain as Domain.com.au

    å‰ç«¯->>åç«¯: POST /api/v1/properties/search
    Note over å‰ç«¯,åç«¯: å‘é€æœç´¢å‚æ•°

    åç«¯->>Firecrawl: è°ƒç”¨çˆ¬å–API
    Note over åç«¯,Firecrawl: ä¼ é€’ç›®æ ‡URLå’Œå‚æ•°

    Firecrawl->>Domain: è®¿é—®Domain.com.au
    Note over Firecrawl,Domain: ä¸“ä¸šçˆ¬å–æœåŠ¡

    Domain-->>Firecrawl: è¿”å›æˆ¿äº§HTMLæ•°æ®
    Firecrawl-->>åç«¯: è¿”å›ç»“æ„åŒ–JSONæ•°æ®
    Note over åç«¯,Firecrawl: å·²è§£æçš„æˆ¿äº§ä¿¡æ¯

    åç«¯->>åç«¯: æ•°æ®å¤„ç†å’Œæ ¼å¼åŒ–
    Note over åç«¯: éªŒè¯ã€æ¸…æ´—ã€æ ‡å‡†åŒ–

    åç«¯-->>å‰ç«¯: è¿”å›æˆ¿äº§åˆ—è¡¨
    Note over å‰ç«¯,åç«¯: æ ‡å‡†JSONæ ¼å¼
```

### ğŸ¯ å®æ—¶æ€§è¯´æ˜

**å…³é”®ç†è§£ï¼šè¿™æ˜¯"å‡†å®æ—¶"è€Œé"å®æ—¶"**

1. **æ•°æ®è·å–æ–¹å¼**ï¼š
   - âœ… **æ¯æ¬¡æœç´¢éƒ½æ˜¯å®æ—¶è°ƒç”¨** Firecrawl API
   - âœ… **Firecrawlä¼šå®æ—¶è®¿é—®** Domain.com.au
   - âœ… **æ•°æ®æ˜¯å½“æ—¶çš„æœ€æ–°æ•°æ®**

2. **ä¸ºä»€ä¹ˆå¯èƒ½"æŠ“å–ä¸åˆ°"**ï¼š
   - ğŸ”‘ **APIå¯†é’¥é—®é¢˜**ï¼šFirecrawl APIéœ€è¦æœ‰æ•ˆå¯†é’¥
   - ğŸ”‘ **ç½‘ç»œè¿æ¥**ï¼šåç«¯æ— æ³•è®¿é—®FirecrawlæœåŠ¡
   - ğŸ”‘ **åŒºåŸŸé™åˆ¶**ï¼šæœç´¢çš„åŒºåŸŸåç§°ä¸æ­£ç¡®
   - ğŸ”‘ **æœåŠ¡çŠ¶æ€**ï¼šFirecrawlæˆ–Domain.com.auä¸´æ—¶ä¸å¯ç”¨

3. **"å®æ—¶"çš„å«ä¹‰**ï¼š
   ```
   ç”¨æˆ·æœç´¢ â†’ ç«‹å³è°ƒç”¨API â†’ ç«‹å³è¿”å›æœ€æ–°æ•°æ®
   (ä¸æ˜¯é¢„å­˜æ•°æ®ï¼Œæ¯æ¬¡éƒ½æ˜¯æœ€æ–°çš„)
   ```

---

## ğŸ”Œ å‰ç«¯è¿æ¥æ–¹æ³•

### åŸºç¡€è¿æ¥æ£€æŸ¥

**ç¬¬1æ­¥ï¼šç¡®è®¤åç«¯æœåŠ¡è¿è¡Œ**
```bash
# æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
curl http://localhost:8000/health

# é¢„æœŸå“åº”
{
  "status": "healthy",
  "timestamp": "2024-09-10T...",
  "version": "2.0.0-python"
}
```

**ç¬¬2æ­¥ï¼šæµ‹è¯•APIè¿é€šæ€§**
```bash
# æµ‹è¯•æˆ¿äº§æœç´¢æ¥å£
curl -X POST "http://localhost:8000/api/v1/properties/search" \
  -H "Content-Type: application/json" \
  -d '{"location": "Camperdown", "max_results": 5}'
```

### JavaScriptå‰ç«¯è¿æ¥ç¤ºä¾‹

#### æ–¹æ³•1ï¼šåŸç”ŸFetch API
```javascript
// æˆ¿äº§æœç´¢å‡½æ•°
async function searchProperties(searchParams) {
  try {
    const response = await fetch('http://localhost:8000/api/v1/properties/search', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        // å¦‚æœæœ‰CORSé—®é¢˜ï¼Œç¡®ä¿åç«¯å·²é…ç½®
      },
      body: JSON.stringify(searchParams)
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();

    if (data.success) {
      console.log(`æ‰¾åˆ° ${data.properties.length} ä¸ªæˆ¿äº§`);
      return data.properties;
    } else {
      console.error('æœç´¢å¤±è´¥:', data.message);
      return [];
    }
  } catch (error) {
    console.error('ç½‘ç»œé”™è¯¯:', error);
    return [];
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const searchParams = {
  location: "Camperdown",
  min_price: 500,
  max_price: 1000,
  bedrooms: 2,
  property_type: "Apartment",
  max_results: 20
};

searchProperties(searchParams).then(properties => {
  // åœ¨å‰ç«¯å±•ç¤ºæˆ¿äº§æ•°æ®
  displayProperties(properties);
});
```

#### æ–¹æ³•2ï¼šAxiosåº“
```javascript
import axios from 'axios';

// é…ç½®åŸºç¡€URL
const API_BASE_URL = 'http://localhost:8000';
const api = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000, // 30ç§’è¶…æ—¶
  headers: {
    'Content-Type': 'application/json'
  }
});

// æˆ¿äº§æœç´¢
export const searchProperties = async (searchParams) => {
  try {
    const response = await api.post('/api/v1/properties/search', searchParams);
    return response.data;
  } catch (error) {
    console.error('APIè°ƒç”¨å¤±è´¥:', error);
    throw error;
  }
};

// å¥åº·æ£€æŸ¥
export const checkHealth = async () => {
  try {
    const response = await api.get('/health');
    return response.data;
  } catch (error) {
    console.error('å¥åº·æ£€æŸ¥å¤±è´¥:', error);
    return { status: 'unhealthy' };
  }
};
```

#### æ–¹æ³•3ï¼šReact Hookç¤ºä¾‹
```javascript
import { useState, useEffect } from 'react';

const usePropertySearch = () => {
  const [properties, setProperties] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const searchProperties = async (searchParams) => {
    setLoading(true);
    setError(null);

    try {
      const response = await fetch('http://localhost:8000/api/v1/properties/search', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(searchParams)
      });

      const data = await response.json();

      if (data.success) {
        setProperties(data.properties);
      } else {
        setError(data.message);
      }
    } catch (err) {
      setError('ç½‘ç»œè¿æ¥å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  return { properties, loading, error, searchProperties };
};

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
function PropertySearch() {
  const { properties, loading, error, searchProperties } = usePropertySearch();

  const handleSearch = () => {
    searchProperties({
      location: "Camperdown",
      bedrooms: 2,
      max_results: 10
    });
  };

  return (
    <div>
      <button onClick={handleSearch} disabled={loading}>
        {loading ? 'æœç´¢ä¸­...' : 'æœç´¢æˆ¿äº§'}
      </button>

      {error && <div className="error">é”™è¯¯: {error}</div>}

      <div className="properties">
        {properties.map(property => (
          <div key={property.id} className="property-card">
            <h3>{property.title}</h3>
            <p>ä»·æ ¼: {property.price}</p>
            <p>ä½ç½®: {property.location}</p>
            <p>æˆ¿é—´: {property.bedrooms}å®¤{property.bathrooms}æµ´</p>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ğŸ“Š å®Œæ•´ä»£ç ç¤ºä¾‹

### å®Œæ•´çš„å‰ç«¯åº”ç”¨ç¤ºä¾‹
```html
<!DOCTYPE html>
<html>
<head>
    <title>æ¾³æ´²ç§Ÿæˆ¿æœç´¢</title>
    <style>
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .search-form { background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .property-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .loading { color: #666; text-align: center; padding: 20px; }
        .error { color: red; background: #ffe6e6; padding: 10px; border-radius: 5px; }
        .success { color: green; background: #e6ffe6; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ  æ¾³æ´²ç§Ÿæˆ¿æœç´¢ç³»ç»Ÿ</h1>

        <!-- æœç´¢è¡¨å• -->
        <div class="search-form">
            <h2>æœç´¢æ¡ä»¶</h2>
            <form id="searchForm">
                <label>æœç´¢åŒºåŸŸ: <input type="text" id="location" value="Camperdown" required></label><br><br>
                <label>æœ€ä½ä»·æ ¼: <input type="number" id="minPrice" value="500"></label>
                <label>æœ€é«˜ä»·æ ¼: <input type="number" id="maxPrice" value="1000"></label><br><br>
                <label>å§å®¤æ•°é‡: <input type="number" id="bedrooms" value="2"></label>
                <label>æµ´å®¤æ•°é‡: <input type="number" id="bathrooms" value="1"></label><br><br>
                <label>æˆ¿äº§ç±»å‹:
                    <select id="propertyType">
                        <option value="">æ‰€æœ‰ç±»å‹</option>
                        <option value="Apartment">å…¬å¯“</option>
                        <option value="House">ç‹¬ç«‹å±‹</option>
                        <option value="Townhouse">è”æ’åˆ«å¢…</option>
                    </select>
                </label><br><br>
                <button type="submit">ğŸ” æœç´¢æˆ¿äº§</button>
            </form>
        </div>

        <!-- çŠ¶æ€æ˜¾ç¤º -->
        <div id="status"></div>

        <!-- ç»“æœæ˜¾ç¤º -->
        <div id="results"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';

        // æ£€æŸ¥åç«¯è¿æ¥
        async function checkConnection() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                showStatus(`âœ… åç«¯è¿æ¥æ­£å¸¸ (ç‰ˆæœ¬: ${data.version})`, 'success');
                return true;
            } catch (error) {
                showStatus(`âŒ åç«¯è¿æ¥å¤±è´¥: ${error.message}`, 'error');
                return false;
            }
        }

        // æœç´¢æˆ¿äº§
        async function searchProperties(searchParams) {
            showStatus('ğŸ”„ æ­£åœ¨æœç´¢æˆ¿äº§...', 'loading');

            try {
                const response = await fetch(`${API_BASE}/api/v1/properties/search`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(searchParams)
                });

                const data = await response.json();

                if (data.success) {
                    showStatus(`âœ… æœç´¢æˆåŠŸï¼Œæ‰¾åˆ° ${data.properties.length} ä¸ªæˆ¿äº§`, 'success');
                    displayProperties(data.properties, data.metadata);
                } else {
                    showStatus(`âŒ æœç´¢å¤±è´¥: ${data.message}`, 'error');
                }
            } catch (error) {
                showStatus(`âŒ ç½‘ç»œé”™è¯¯: ${error.message}`, 'error');
            }
        }

        // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="${type}">${message}</div>`;
        }

        // æ˜¾ç¤ºæˆ¿äº§åˆ—è¡¨
        function displayProperties(properties, metadata) {
            const resultsDiv = document.getElementById('results');

            if (properties.length === 0) {
                resultsDiv.innerHTML = '<p>æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æˆ¿äº§</p>';
                return;
            }

            let html = `<h2>æœç´¢ç»“æœ (${properties.length} ä¸ªæˆ¿äº§ï¼Œæœç´¢è€—æ—¶: ${metadata.search_time_ms.toFixed(1)}ms)</h2>`;

            properties.forEach(property => {
                html += `
                    <div class="property-card">
                        <h3>${property.title}</h3>
                        <p><strong>ä»·æ ¼:</strong> ${property.price}</p>
                        <p><strong>ä½ç½®:</strong> ${property.location}</p>
                        <p><strong>æˆ¿é—´:</strong> ${property.bedrooms || 'N/A'}å®¤ ${property.bathrooms || 'N/A'}æµ´ ${property.parking || 0}è½¦ä½</p>
                        <p><strong>ç±»å‹:</strong> ${property.property_type}</p>
                        <p><strong>æè¿°:</strong> ${property.description}</p>
                        <p><strong>ç‰¹è‰²:</strong> ${property.features.join(', ')}</p>
                        <p><strong>ä¸­ä»‹:</strong> ${property.agent.name} - ${property.agent.phone}</p>
                        <p><strong>æ•°æ®æ¥æº:</strong> ${property.source}</p>
                        <p><strong>æ›´æ–°æ—¶é—´:</strong> ${new Date(property.scraped_at).toLocaleString('zh-CN')}</p>
                        <a href="${property.url}" target="_blank">æŸ¥çœ‹åŸç½‘é¡µ</a>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // è¡¨å•æäº¤å¤„ç†
        document.getElementById('searchForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const searchParams = {
                location: document.getElementById('location').value,
                min_price: parseInt(document.getElementById('minPrice').value) || undefined,
                max_price: parseInt(document.getElementById('maxPrice').value) || undefined,
                bedrooms: parseInt(document.getElementById('bedrooms').value) || undefined,
                bathrooms: parseInt(document.getElementById('bathrooms').value) || undefined,
                property_type: document.getElementById('propertyType').value || undefined,
                max_results: 20
            };

            await searchProperties(searchParams);
        });

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥è¿æ¥
        window.addEventListener('load', checkConnection);
    </script>
</body>
</html>
```

---

## ğŸ” æ•°æ®æµç¨‹å›¾è§£

### è¯¦ç»†æ•°æ®æµç¨‹
```
1. å‰ç«¯å‘èµ·æœç´¢è¯·æ±‚
   â†“
2. åç«¯æ¥æ”¶è¯·æ±‚å‚æ•°
   â”œâ”€ éªŒè¯å‚æ•°æ ¼å¼ (Pydantic)
   â”œâ”€ æ£€æŸ¥å¿…å¡«å­—æ®µ
   â””â”€ å‚æ•°åˆç†æ€§éªŒè¯
   â†“
3. è°ƒç”¨Firecrawl API
   â”œâ”€ æ„å»ºDomain.com.auæœç´¢URL
   â”œâ”€ è®¾ç½®çˆ¬å–å‚æ•°
   â””â”€ å‘é€HTTPè¯·æ±‚åˆ°Firecrawl
   â†“
4. Firecrawlæ‰§è¡Œçˆ¬å–
   â”œâ”€ è®¿é—®Domain.com.au
   â”œâ”€ è§£æHTMLå†…å®¹
   â”œâ”€ æå–æˆ¿äº§ä¿¡æ¯
   â””â”€ è¿”å›ç»“æ„åŒ–æ•°æ®
   â†“
5. åç«¯å¤„ç†æ•°æ®
   â”œâ”€ æ•°æ®æ¸…æ´—å’ŒéªŒè¯
   â”œâ”€ æ ¼å¼æ ‡å‡†åŒ–
   â”œâ”€ ç”ŸæˆUUID
   â””â”€ æ·»åŠ æ—¶é—´æˆ³
   â†“
6. åå°ä»»åŠ¡ (å¯é€‰)
   â”œâ”€ ä¿å­˜åˆ°æ•°æ®åº“
   â”œâ”€ ç”ŸæˆCSVæ–‡ä»¶
   â””â”€ æ›´æ–°ç¼“å­˜
   â†“
7. è¿”å›ç»™å‰ç«¯
   â”œâ”€ JSONæ ¼å¼å“åº”
   â”œâ”€ åŒ…å«å…ƒæ•°æ®
   â””â”€ é”™è¯¯å¤„ç†
```

### APIå“åº”ç»“æ„è¯¦è§£
```javascript
{
  "success": true,                    // è¯·æ±‚æ˜¯å¦æˆåŠŸ
  "properties": [                     // æˆ¿äº§æ•°ç»„
    {
      "id": "uuid-string",           // å”¯ä¸€æ ‡è¯†
      "title": "æˆ¿äº§æ ‡é¢˜",
      "price": "$650/week",          // ä»·æ ¼å­—ç¬¦ä¸²
      "location": "Camperdown",      // åœ°åŒº
      "bedrooms": 2,                 // å§å®¤æ•°
      "bathrooms": 1,                // æµ´å®¤æ•°
      "parking": 1,                  // åœè½¦ä½
      "property_type": "Apartment",  // æˆ¿äº§ç±»å‹
      "description": "è¯¦ç»†æè¿°...",
      "features": ["ç©ºè°ƒ", "é˜³å°"],   // ç‰¹è‰²åˆ—è¡¨
      "images": ["url1", "url2"],    // å›¾ç‰‡URLs
      "agent": {                     // ä¸­ä»‹ä¿¡æ¯
        "name": "ä¸­ä»‹å§“å",
        "phone": "ç”µè¯å·ç ",
        "email": "é‚®ç®±åœ°å€"
      },
      "coordinates": {               // åæ ‡ (å¦‚æœ‰)
        "lat": -33.8688,
        "lng": 151.2093
      },
      "url": "åŸç½‘é¡µé“¾æ¥",
      "source": "æ•°æ®æ¥æº",
      "scraped_at": "æŠ“å–æ—¶é—´ISOæ ¼å¼"
    }
  ],
  "metadata": {                      // æœç´¢å…ƒæ•°æ®
    "total_found": 15,               // æ€»æ‰¾åˆ°æ•°é‡
    "search_time_ms": 2847.5,        // æœç´¢è€—æ—¶
    "firecrawl_usage": {             // APIä½¿ç”¨ä¿¡æ¯
      "credits_used": 1,
      "credits_remaining": 999
    },
    "search_params": { ... },        // åŸå§‹æœç´¢å‚æ•°
    "timestamp": "å“åº”æ—¶é—´"
  },
  "message": "æˆåŠŸæ‰¾åˆ° 15 ä¸ªæˆ¿äº§"      // ç”¨æˆ·å‹å¥½æ¶ˆæ¯
}
```

---

## â“ å¸¸è§é—®é¢˜è§£ç­”

### Q1: "æ‰¾ä¸åˆ°åç«¯æ•°æ®" æ€ä¹ˆåŠï¼Ÿ

**A1: é€æ­¥æ’æŸ¥æ¸…å•**
```bash
# 1. æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨
curl http://localhost:8000/health
# æœŸæœ›: {"status": "healthy", ...}

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®
netstat -an | grep 8000
# æˆ–è€…
netstat -an | grep 3000

# 3. æµ‹è¯•ç®€å•APIè°ƒç”¨
curl -X POST "http://localhost:8000/api/v1/properties/search" \
  -H "Content-Type: application/json" \
  -d '{"location": "Sydney"}'

# 4. æ£€æŸ¥CORSè®¾ç½®
# åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰CORSé”™è¯¯
```

### Q2: ä¸ºä»€ä¹ˆæœç´¢ç»“æœä¸ºç©ºï¼Ÿ

**A2: å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ**

1. **Firecrawl APIå¯†é’¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ç¯å¢ƒå˜é‡
   echo $FIRECRAWL_API_KEY
   # æˆ–æ£€æŸ¥.envæ–‡ä»¶
   cat .env | grep FIRECRAWL
   ```

2. **æœç´¢åŒºåŸŸåç§°ä¸æ­£ç¡®**
   ```javascript
   // ä½¿ç”¨æ ‡å‡†çš„æ¾³æ´²åŒºåŸŸåç§°
   const validLocations = [
     "Sydney", "Melbourne", "Brisbane", "Perth", "Adelaide",
     "Camperdown", "Newtown", "Bondi", "Carlton", "Fitzroy"
   ];
   ```

3. **æœç´¢æ¡ä»¶è¿‡äºä¸¥æ ¼**
   ```javascript
   // å°è¯•å®½æ¾çš„æœç´¢æ¡ä»¶
   const searchParams = {
     location: "Sydney",        // åªè®¾ç½®å¿…å¡«é¡¹
     max_results: 50           // å¢åŠ ç»“æœæ•°é‡
   };
   ```

### Q3: å¦‚ä½•å¤„ç†ç½‘ç»œè¶…æ—¶ï¼Ÿ

**A3: å¢åŠ è¶…æ—¶å¤„ç†**
```javascript
const searchWithTimeout = async (searchParams, timeout = 30000) => {
  const controller = new AbortController();
  const timeoutId = setTimeout(() => controller.abort(), timeout);

  try {
    const response = await fetch('/api/v1/properties/search', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(searchParams),
      signal: controller.signal
    });

    clearTimeout(timeoutId);
    return await response.json();
  } catch (error) {
    if (error.name === 'AbortError') {
      throw new Error('è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•');
    }
    throw error;
  }
};
```

### Q4: å¦‚ä½•å®ç°å®æ—¶æœç´¢å»ºè®®ï¼Ÿ

**A4: é˜²æŠ–åŠ¨æœç´¢å®ç°**
```javascript
function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}

// ä½¿ç”¨ç¤ºä¾‹
function SearchInput() {
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearchTerm = useDebounce(searchTerm, 500);

  useEffect(() => {
    if (debouncedSearchTerm) {
      // æ‰§è¡Œæœç´¢
      searchProperties({ location: debouncedSearchTerm });
    }
  }, [debouncedSearchTerm]);

  return (
    <input
      type="text"
      value={searchTerm}
      onChange={(e) => setSearchTerm(e.target.value)}
      placeholder="è¾“å…¥æœç´¢åŒºåŸŸ..."
    />
  );
}
```

---

## ğŸ”§ è°ƒè¯•å’Œæ’é”™

### åç«¯æ—¥å¿—æŸ¥çœ‹
```bash
# å¦‚æœä½¿ç”¨Docker
docker-compose logs -f app

# å¦‚æœç›´æ¥è¿è¡ŒPython
tail -f logs/app.log
```

### å‰ç«¯è°ƒè¯•æŠ€å·§
```javascript
// 1. åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ç”¨è¯¦ç»†æ—¥å¿—
localStorage.setItem('debug', 'true');

// 2. æ·»åŠ è¯·æ±‚/å“åº”æ—¥å¿—
const loggedFetch = async (url, options) => {
  console.log('ğŸš€ å‘é€è¯·æ±‚:', url, options);

  try {
    const response = await fetch(url, options);
    const data = await response.json();
    console.log('âœ… æ”¶åˆ°å“åº”:', data);
    return data;
  } catch (error) {
    console.error('âŒ è¯·æ±‚å¤±è´¥:', error);
    throw error;
  }
};

// 3. ç½‘ç»œé¢æ¿æ£€æŸ¥
// æ‰“å¼€å¼€å‘è€…å·¥å…· > Network æ ‡ç­¾
// æŸ¥çœ‹APIè¯·æ±‚çš„çŠ¶æ€ç ã€å“åº”æ—¶é—´ã€å“åº”å†…å®¹
```

### APIæµ‹è¯•å·¥å…·æ¨è
```bash
# 1. ä½¿ç”¨curlæµ‹è¯•
curl -X POST "http://localhost:8000/api/v1/properties/search" \
  -H "Content-Type: application/json" \
  -d '{"location": "Sydney"}' \
  -v  # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

# 2. ä½¿ç”¨Postman
# å¯¼å…¥APIé›†åˆ: è®¿é—® http://localhost:8000/docs
# ç‚¹å‡» "Download OpenAPI JSON"

# 3. ä½¿ç”¨HTTPie (æ¨è)
pip install httpie
http POST localhost:8000/api/v1/properties/search location=Sydney
```

---

## ğŸ“ è·å–æŠ€æœ¯æ”¯æŒ

### å¿«é€Ÿæ£€æŸ¥æ¸…å•
- [ ] åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Ÿ
- [ ] APIåœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿ
- [ ] CORSè®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] Firecrawl APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆï¼Ÿ
- [ ] æœç´¢å‚æ•°æ˜¯å¦åˆç†ï¼Ÿ

### è”ç³»æ–¹å¼
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **é¡¹ç›®ä»“åº“**: https://github.com/ZeshiKing/sydney-property-ai-Arthur

---

## ğŸ¯ æ€»ç»“

1. **ç³»ç»Ÿå·¥ä½œåŸç†**: å‰ç«¯ â†’ åç«¯API â†’ Firecrawl â†’ Domain.com.au â†’ è¿”å›æ•°æ®
2. **å®æ—¶æ€§è¯´æ˜**: æ¯æ¬¡æœç´¢éƒ½å®æ—¶è°ƒç”¨ï¼Œä¸æ˜¯é¢„å­˜æ•°æ®
3. **è¿æ¥æ–¹æ³•**: ä½¿ç”¨HTTP POSTè¯·æ±‚è°ƒç”¨ `/api/v1/properties/search`
4. **æ•°æ®æ ¼å¼**: æ ‡å‡†JSONæ ¼å¼ï¼ŒåŒ…å«å®Œæ•´çš„æˆ¿äº§ä¿¡æ¯
5. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’ŒçŠ¶æ€ç®¡ç†

**ç°åœ¨ä½ å¯ä»¥æ”¾å¿ƒè¿æ¥åç«¯APIäº†ï¼** ğŸš€

---

*å¦‚æœè¿˜æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶æŸ¥çœ‹APIæ–‡æ¡£æˆ–ä¸åç«¯å¼€å‘è€…è”ç³»ã€‚*